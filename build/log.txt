==92009== Memcheck, a memory error detector
==92009== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.
==92009== Using Valgrind-3.19.0 and LibVEX; rerun with -h for copyright info
==92009== Command: ./test/server/test_tcp_server
==92009== Parent PID: 91060
==92009== 
==92009== Mismatched free() / delete / delete []
==92009==    at 0x4846AFF: operator delete(void*, unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==92009==    by 0x11C5EE: galay::Epoll_Engine::~Epoll_Engine() (engine.cc:77)
==92009==    by 0x118316: void std::destroy_at<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:88)
==92009==    by 0x117CD8: void std::_Destroy<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:149)
==92009==    by 0x11760D: void std::allocator_traits<std::allocator<void> >::destroy<galay::Epoll_Engine>(std::allocator<void>&, galay::Epoll_Engine*) (alloc_traits.h:648)
==92009==    by 0x116B44: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:613)
==92009==    by 0x10E25E: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:346)
==92009==    by 0x10EC60: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:1071)
==92009==    by 0x10E96D: std::__shared_ptr<galay::Engine, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1524)
==92009==    by 0x10E98D: std::shared_ptr<galay::Engine>::~shared_ptr() (shared_ptr.h:175)
==92009==    by 0x114642: galay::Server<galay::Tcp_Request, galay::Tcp_Response>::~Server() (server.hpp:49)
==92009==    by 0x117580: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::~Tcp_Server() (server.hpp:157)
==92009==  Address 0x52ed200 is 0 bytes inside a block of size 24,576 alloc'd
==92009==    at 0x4845283: operator new[](unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==92009==    by 0x11C32F: galay::Epoll_Engine::Epoll_Engine(int, int) (engine.cc:6)
==92009==    by 0x116779: void std::_Construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(galay::Epoll_Engine*, unsigned int&, unsigned int&) (stl_construct.h:119)
==92009==    by 0x11660E: void std::allocator_traits<std::allocator<void> >::construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(std::allocator<void>&, galay::Epoll_Engine*, unsigned int&, unsigned int&) (alloc_traits.h:635)
==92009==    by 0x11618D: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<unsigned int&, unsigned int&>(std::allocator<void>, unsigned int&, unsigned int&) (shared_ptr_base.h:604)
==92009==    by 0x115B20: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<galay::Epoll_Engine, std::allocator<void>, unsigned int&, unsigned int&>(galay::Epoll_Engine*&, std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:971)
==92009==    by 0x115493: std::__shared_ptr<galay::Epoll_Engine, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:1712)
==92009==    by 0x114F68: std::shared_ptr<galay::Epoll_Engine>::shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr.h:464)
==92009==    by 0x1146E0: std::shared_ptr<galay::Epoll_Engine> std::make_shared<galay::Epoll_Engine, unsigned int&, unsigned int&>(unsigned int&, unsigned int&) (shared_ptr.h:1010)
==92009==    by 0x113D2D: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::Tcp_Server(galay::Tcp_Server_Config&&) (server.hpp:103)
==92009==    by 0x11358B: void std::_Construct<galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>, galay::Tcp_Server_Config>(galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>*, galay::Tcp_Server_Config&&) (stl_construct.h:119)
==92009==    by 0x112A71: void std::allocator_traits<std::allocator<void> >::construct<galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>, galay::Tcp_Server_Config>(std::allocator<void>&, galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>*, galay::Tcp_Server_Config&&) (alloc_traits.h:635)
==92009== 
==92009== 
==92009== HEAP SUMMARY:
==92009==     in use at exit: 0 bytes in 0 blocks
==92009==   total heap usage: 14 allocs, 14 frees, 117,328 bytes allocated
==92009== 
==92009== All heap blocks were freed -- no leaks are possible
==92009== 
==92009== For lists of detected and suppressed errors, rerun with: -s
==92009== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
