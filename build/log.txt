==56076== Memcheck, a memory error detector
==56076== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.
==56076== Using Valgrind-3.19.0 and LibVEX; rerun with -h for copyright info
==56076== Command: ./test/test
==56076== Parent PID: 54569
==56076== 
==56076== Mismatched free() / delete / delete []
==56076==    at 0x4846AFF: operator delete(void*, unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==56076==    by 0x118768: galay::iofunction::Tcp_Function::Recv(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, unsigned int) (iofunction.cc:78)
==56076==    by 0x10F3C2: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::epoll_read_package(std::shared_ptr<galay::Epoll_Engine>, std::shared_ptr<galay::Tcp_Server_Config>, int, std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (server.hpp:195)
==56076==    by 0x10E1E6: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::start(std::function<void (std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >)>&&) (server.hpp:118)
==56076==    by 0x10CBCF: main (test.cc:22)
==56076==  Address 0x52f3680 is 0 bytes inside a block of size 1,024 alloc'd
==56076==    at 0x4845283: operator new[](unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==56076==    by 0x1186E6: galay::iofunction::Tcp_Function::Recv(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, unsigned int) (iofunction.cc:70)
==56076==    by 0x10F3C2: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::epoll_read_package(std::shared_ptr<galay::Epoll_Engine>, std::shared_ptr<galay::Tcp_Server_Config>, int, std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (server.hpp:195)
==56076==    by 0x10E1E6: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::start(std::function<void (std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >)>&&) (server.hpp:118)
==56076==    by 0x10CBCF: main (test.cc:22)
==56076== 
==56076== Mismatched free() / delete / delete []
==56076==    at 0x4846AFF: operator delete(void*, unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==56076==    by 0x118735: galay::iofunction::Tcp_Function::Recv(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, unsigned int) (iofunction.cc:74)
==56076==    by 0x10F3C2: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::epoll_read_package(std::shared_ptr<galay::Epoll_Engine>, std::shared_ptr<galay::Tcp_Server_Config>, int, std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (server.hpp:195)
==56076==    by 0x10E1E6: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::start(std::function<void (std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >)>&&) (server.hpp:118)
==56076==    by 0x10CBCF: main (test.cc:22)
==56076==  Address 0x52f8260 is 0 bytes inside a block of size 1,024 alloc'd
==56076==    at 0x4845283: operator new[](unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==56076==    by 0x1186E6: galay::iofunction::Tcp_Function::Recv(int, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, unsigned int) (iofunction.cc:70)
==56076==    by 0x10F3C2: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::epoll_read_package(std::shared_ptr<galay::Epoll_Engine>, std::shared_ptr<galay::Tcp_Server_Config>, int, std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) (server.hpp:195)
==56076==    by 0x10E1E6: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::start(std::function<void (std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >)>&&) (server.hpp:118)
==56076==    by 0x10CBCF: main (test.cc:22)
==56076== 
==56076== Mismatched free() / delete / delete []
==56076==    at 0x4846AFF: operator delete(void*, unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==56076==    by 0x1182D2: galay::Epoll_Engine::~Epoll_Engine() (engine.cc:77)
==56076==    by 0x117F60: void std::destroy_at<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:88)
==56076==    by 0x117E26: void std::_Destroy<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:149)
==56076==    by 0x117CA5: void std::allocator_traits<std::allocator<void> >::destroy<galay::Epoll_Engine>(std::allocator<void>&, galay::Epoll_Engine*) (alloc_traits.h:648)
==56076==    by 0x117650: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:613)
==56076==    by 0x10D0B6: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:346)
==56076==    by 0x10DA9E: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:1071)
==56076==    by 0x10D7C5: std::__shared_ptr<galay::Engine, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1524)
==56076==    by 0x10D7E5: std::shared_ptr<galay::Engine>::~shared_ptr() (shared_ptr.h:175)
==56076==    by 0x1150A4: galay::Server<galay::Tcp_Request, galay::Tcp_Response>::~Server() (server.hpp:49)
==56076==    by 0x117B11: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::~Tcp_Server() (server.hpp:152)
==56076==  Address 0x52ed200 is 0 bytes inside a block of size 24,576 alloc'd
==56076==    at 0x4845283: operator new[](unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==56076==    by 0x118013: galay::Epoll_Engine::Epoll_Engine(int, int) (engine.cc:6)
==56076==    by 0x11431B: void std::_Construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(galay::Epoll_Engine*, unsigned int&, unsigned int&) (stl_construct.h:119)
==56076==    by 0x11361A: void std::allocator_traits<std::allocator<void> >::construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(std::allocator<void>&, galay::Epoll_Engine*, unsigned int&, unsigned int&) (alloc_traits.h:635)
==56076==    by 0x1129FB: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<unsigned int&, unsigned int&>(std::allocator<void>, unsigned int&, unsigned int&) (shared_ptr_base.h:604)
==56076==    by 0x111CA6: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<galay::Epoll_Engine, std::allocator<void>, unsigned int&, unsigned int&>(galay::Epoll_Engine*&, std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:971)
==56076==    by 0x110F61: std::__shared_ptr<galay::Epoll_Engine, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:1712)
==56076==    by 0x10FF42: std::shared_ptr<galay::Epoll_Engine>::shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr.h:464)
==56076==    by 0x10F01F: std::shared_ptr<galay::Epoll_Engine> std::make_shared<galay::Epoll_Engine, unsigned int&, unsigned int&>(unsigned int&, unsigned int&) (shared_ptr.h:1010)
==56076==    by 0x10DF73: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::start(std::function<void (std::shared_ptr<galay::Task<galay::Tcp_Request, galay::Tcp_Response> >)>&&) (server.hpp:92)
==56076==    by 0x10CBCF: main (test.cc:22)
==56076== 
==56076== 
==56076== HEAP SUMMARY:
==56076==     in use at exit: 0 bytes in 0 blocks
==56076==   total heap usage: 53 allocs, 53 frees, 134,339 bytes allocated
==56076== 
==56076== All heap blocks were freed -- no leaks are possible
==56076== 
==56076== For lists of detected and suppressed errors, rerun with: -s
==56076== ERROR SUMMARY: 18 errors from 3 contexts (suppressed: 0 from 0)
