==72766== Memcheck, a memory error detector
==72766== Copyright (C) 2002-2022, and GNU GPL'd, by Julian Seward et al.
==72766== Using Valgrind-3.19.0 and LibVEX; rerun with -h for copyright info
==72766== Command: ./test/server/test_tcp_server
==72766== Parent PID: 69571
==72766== 
==72766== Mismatched free() / delete / delete []
==72766==    at 0x4846AFF: operator delete(void*, unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==72766==    by 0x11C2B4: galay::Epoll_Engine::~Epoll_Engine() (engine.cc:77)
==72766==    by 0x11805E: void std::destroy_at<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:88)
==72766==    by 0x117A20: void std::_Destroy<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:149)
==72766==    by 0x11737B: void std::allocator_traits<std::allocator<void> >::destroy<galay::Epoll_Engine>(std::allocator<void>&, galay::Epoll_Engine*) (alloc_traits.h:648)
==72766==    by 0x116866: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:613)
==72766==    by 0x10E22A: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:346)
==72766==    by 0x10EC2C: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:1071)
==72766==    by 0x10E939: std::__shared_ptr<galay::Engine, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1524)
==72766==    by 0x10E959: std::shared_ptr<galay::Engine>::~shared_ptr() (shared_ptr.h:175)
==72766==    by 0x114364: galay::Server<galay::Tcp_Request, galay::Tcp_Response>::~Server() (server.hpp:49)
==72766==    by 0x1172EE: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::~Tcp_Server() (server.hpp:158)
==72766==  Address 0x52ed200 is 0 bytes inside a block of size 24,576 alloc'd
==72766==    at 0x4845283: operator new[](unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==72766==    by 0x11BFF5: galay::Epoll_Engine::Epoll_Engine(int, int) (engine.cc:6)
==72766==    by 0x11649B: void std::_Construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(galay::Epoll_Engine*, unsigned int&, unsigned int&) (stl_construct.h:119)
==72766==    by 0x116330: void std::allocator_traits<std::allocator<void> >::construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(std::allocator<void>&, galay::Epoll_Engine*, unsigned int&, unsigned int&) (alloc_traits.h:635)
==72766==    by 0x115EAF: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<unsigned int&, unsigned int&>(std::allocator<void>, unsigned int&, unsigned int&) (shared_ptr_base.h:604)
==72766==    by 0x115842: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<galay::Epoll_Engine, std::allocator<void>, unsigned int&, unsigned int&>(galay::Epoll_Engine*&, std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:971)
==72766==    by 0x1151B5: std::__shared_ptr<galay::Epoll_Engine, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:1712)
==72766==    by 0x114C8A: std::shared_ptr<galay::Epoll_Engine>::shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr.h:464)
==72766==    by 0x114402: std::shared_ptr<galay::Epoll_Engine> std::make_shared<galay::Epoll_Engine, unsigned int&, unsigned int&>(unsigned int&, unsigned int&) (shared_ptr.h:1010)
==72766==    by 0x113A4F: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::Tcp_Server(galay::Tcp_Server_Config&&) (server.hpp:103)
==72766==    by 0x1132AD: void std::_Construct<galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>, galay::Tcp_Server_Config>(galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>*, galay::Tcp_Server_Config&&) (stl_construct.h:119)
==72766==    by 0x112793: void std::allocator_traits<std::allocator<void> >::construct<galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>, galay::Tcp_Server_Config>(std::allocator<void>&, galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>*, galay::Tcp_Server_Config&&) (alloc_traits.h:635)
==72766== 
==72766== 
==72766== HEAP SUMMARY:
==72766==     in use at exit: 0 bytes in 0 blocks
==72766==   total heap usage: 51 allocs, 51 frees, 135,408 bytes allocated
==72766== 
==72766== All heap blocks were freed -- no leaks are possible
==72766== 
==72766== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
==72766== 
==72766== 1 errors in context 1 of 1:
==72766== Mismatched free() / delete / delete []
==72766==    at 0x4846AFF: operator delete(void*, unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==72766==    by 0x11C2B4: galay::Epoll_Engine::~Epoll_Engine() (engine.cc:77)
==72766==    by 0x11805E: void std::destroy_at<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:88)
==72766==    by 0x117A20: void std::_Destroy<galay::Epoll_Engine>(galay::Epoll_Engine*) (stl_construct.h:149)
==72766==    by 0x11737B: void std::allocator_traits<std::allocator<void> >::destroy<galay::Epoll_Engine>(std::allocator<void>&, galay::Epoll_Engine*) (alloc_traits.h:648)
==72766==    by 0x116866: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:613)
==72766==    by 0x10E22A: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:346)
==72766==    by 0x10EC2C: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:1071)
==72766==    by 0x10E939: std::__shared_ptr<galay::Engine, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:1524)
==72766==    by 0x10E959: std::shared_ptr<galay::Engine>::~shared_ptr() (shared_ptr.h:175)
==72766==    by 0x114364: galay::Server<galay::Tcp_Request, galay::Tcp_Response>::~Server() (server.hpp:49)
==72766==    by 0x1172EE: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::~Tcp_Server() (server.hpp:158)
==72766==  Address 0x52ed200 is 0 bytes inside a block of size 24,576 alloc'd
==72766==    at 0x4845283: operator new[](unsigned long) (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==72766==    by 0x11BFF5: galay::Epoll_Engine::Epoll_Engine(int, int) (engine.cc:6)
==72766==    by 0x11649B: void std::_Construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(galay::Epoll_Engine*, unsigned int&, unsigned int&) (stl_construct.h:119)
==72766==    by 0x116330: void std::allocator_traits<std::allocator<void> >::construct<galay::Epoll_Engine, unsigned int&, unsigned int&>(std::allocator<void>&, galay::Epoll_Engine*, unsigned int&, unsigned int&) (alloc_traits.h:635)
==72766==    by 0x115EAF: std::_Sp_counted_ptr_inplace<galay::Epoll_Engine, std::allocator<void>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<unsigned int&, unsigned int&>(std::allocator<void>, unsigned int&, unsigned int&) (shared_ptr_base.h:604)
==72766==    by 0x115842: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<galay::Epoll_Engine, std::allocator<void>, unsigned int&, unsigned int&>(galay::Epoll_Engine*&, std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:971)
==72766==    by 0x1151B5: std::__shared_ptr<galay::Epoll_Engine, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr_base.h:1712)
==72766==    by 0x114C8A: std::shared_ptr<galay::Epoll_Engine>::shared_ptr<std::allocator<void>, unsigned int&, unsigned int&>(std::_Sp_alloc_shared_tag<std::allocator<void> >, unsigned int&, unsigned int&) (shared_ptr.h:464)
==72766==    by 0x114402: std::shared_ptr<galay::Epoll_Engine> std::make_shared<galay::Epoll_Engine, unsigned int&, unsigned int&>(unsigned int&, unsigned int&) (shared_ptr.h:1010)
==72766==    by 0x113A4F: galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>::Tcp_Server(galay::Tcp_Server_Config&&) (server.hpp:103)
==72766==    by 0x1132AD: void std::_Construct<galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>, galay::Tcp_Server_Config>(galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>*, galay::Tcp_Server_Config&&) (stl_construct.h:119)
==72766==    by 0x112793: void std::allocator_traits<std::allocator<void> >::construct<galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>, galay::Tcp_Server_Config>(std::allocator<void>&, galay::Tcp_Server<galay::Tcp_Request, galay::Tcp_Response>*, galay::Tcp_Server_Config&&) (alloc_traits.h:635)
==72766== 
==72766== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
